function brzycki(e,t){"use strict";if(1>t)throw"Reps must be 1 or greater to calculate 1RM";return Math.round(e*(36/(37-t)))}function isNumber(e){var t;try{t=!isNaN(e)}catch(n){return!1}return t}var angularApp=function(e){"use strict";var t=e.module("StrengthTracker",["ngRoute","ngAnimate","ui.bootstrap","StorageService"]);return t.config(["$routeProvider","$logProvider",function(e,t){e.when("/",{templateUrl:"views/goals.html",controller:"GoalCtrl"}).when("/record",{templateUrl:"views/record-data.html",controller:"RecordCtrl"}).when("/history",{templateUrl:"views/history.html",controller:"historyCtrl"}).when("/settings",{templateUrl:"views/settings.html",controller:"settingsCtrl"}).when("/about",{templateUrl:"views/about.html"}).when("/edit",{templateUrl:"views/edit.html",controller:"editCtrl"}).when("/test",{templateUrl:"views/goals.html",controller:"GoalCtrl"}).otherwise({redirectTo:"/"}),t.debugEnabled(!0)}]),t}(window.angular);!function(e){"use strict";var t=e("#header"),n=t.find(".navbar-toggle"),r=e("#main-nav").find(".nav > li > a");n.add(r).click(function(){e("body").toggleClass("mm-open")})}(window.jQuery),function(){"use strict";try{Build.VERSION.SDK_INT>=Build.VERSION_CODES.KITKAT&&WebView.setWebContentsDebuggingEnabled(!0)}catch(e){console.debug("Android not detected. Not setting WebContentDebugging.")}}(),console.debug("app.js loaded."),function(e){"use strict";e.controller("RecordCtrl",["$scope","Storage",function(e,t){e.exercise=null,e.animationClass="lightSpeedIn",t.setupDatabase(),e.setExercise=function(t){e.exercise=t,e.message=null,e.resetForm()},e.saveExercise=function(){if(e.isValid()){var n=e.exercise.toLowerCase(),r="bench press"===n?"bench":"squat"===n?"squat":"deadlift";try{var a=brzycki(e.weight,e.reps);t.addExercise(r,{reps:e.reps,weight:e.weight,date:new Date,max:a}),e.message="Nice! Your data has been saved!",e.reset()}catch(o){console.error(o.message),e.message="There was an error saving your data. Please try again later.",e.resetForm(),e.reset()}}},e.isValid=function(){var t=e.reps,n=e.weight;return t&&t>=1&&t%1==0&&n&&n>=1},e.resetForm=function(){e.form.$setPristine(),e.form.$setUntouched()},e.cancel=function(){e.resetForm(),e.reset()},e.reset=function(){e.reps=null,e.weight=null,e.exercise=null}}])}(window.angularApp),console.debug("Main Controller loaded."),function(e){"use strict";e.controller("historyCtrl",["$scope","$log","$timeout","$q","Storage",function(e,t,n,r,a){var o="No data found for lift. Go enter some!";e.db=a.getConnection(),e.generateChartData=function(e,t){return{title:{text:"",x:-20},xAxis:{categories:t,title:{text:"Date"}},yAxis:{title:{text:"Weight"}},series:[{name:"Weight",data:e}]}},e.populateCharts=function(n,r){var a=e.db;a.transaction(function(a){var i="SELECT max, recorded from "+n+" ORDER BY recorded ASC";a.executeSql(i,[],function(a,i){var s=i.rows.length;t.debug("Retrieved "+s+" results for query");for(var c=[],l=[],u=0;s>u;u++){var d=i.rows.item(u).max,g=i.rows.item(u).recorded;c.push(d),l.push(moment(g).format("MM/DD/YY"))}if(c.length&&l.length)!r instanceof jQuery&&(r=angular.element(r)),r.highcharts(e.generateChartData(c,l));else switch(n){case"bench":e.benchMessage=o;break;case"squat":e.squatMessage=o;break;case"deadlift":e.deadliftMessage=o}e.$apply()})})},e.$on("$routeChangeSuccess",function(){e.populateCharts("bench",angular.element("#benchchart")),e.populateCharts("squat",angular.element("#squatchart")),e.populateCharts("deadlift",angular.element("#deadliftchart"))})}])}(window.angularApp),function(e){"use strict";e.controller("editCtrl",["$scope","$uibModal","$log","Storage",function(e,t,n,r){e.rows=[],e.itemsPerPage=10,e.currentPage=1,e.db=r.getConnection(),e.edit=function(n){t.open({animation:!0,templateUrl:"views/editModal.html",controller:"ModalInstanceCtrl",resolve:{item:function(){return n.table=e.exercise,n}}})},e.selectExercise=function(t){e.exercise=t;var r=e.db;r.transaction(function(r){var a="SELECT * FROM "+t+" ORDER BY recorded ASC";r.executeSql(a,[],function(t,n){for(var r=n.rows.length,a=0;r>a;a++){var o=n.rows.item(a);e.rows.push({weight:o.weight,reps:o.reps,date:moment(o.recorded).format("MM/DD/YY"),id:o.id})}e.$apply()},function(e,t){n.error(t)})})},e["delete"]=function(t,r,a){var o=r.id,i="DELETE from "+t+" WHERE id=?",s=e.db;s.transaction(function(t){t.executeSql(i,[o],function(t,n){1===n.rowsAffected&&(e.rows.splice(a,1),e.$apply())},function(e,t){n.error(t)})})}}]),e.controller("ModalInstanceCtrl",["$scope","$log","item","$uibModalInstance","Storage",function(e,t,n,r,a){e.db=a.getConnection(),e.db||(e.error="The database could not be reached. Please try again later."),e.selected=n,e.reps=n.reps,e.weight=n.weight,e.close=function(){r.dismiss("cancel")},e.update=function(n,a){if(!(n.reps.$invalid||n.weight.$invalid>0)){var o=e.selected.id,i=e.selected.reps=n.reps.$modelValue,s=e.selected.weight=n.weight.$modelValue,c=brzycki(s,i),l=e.db;l.transaction(function(e){var n="UPDATE "+a+" SET reps=?, weight=?, max=? WHERE id=?";e.executeSql(n,[i,s,c,o],function(e,t){1===t.rowsAffected&&r.close()},function(e,n){t.error(n)})})}}}])}(window.angularApp),function(e){"use strict";e.controller("settingsCtrl",["$scope","$timeout","Storage",function(e,t,n){e.clearDatabase=function(){n.dropTables(),window.localStorage.clear(),e.message="Database has been cleared!",t(function(){e.message=null},2e3)}}])}(window.angularApp),function(e){function t(e){var t,r=document.getElementById(e.canvas),o=r.getContext("2d");t=0==e.goal?0:Math.round(e.current/e.goal*100),isNaN(t)&&(t=0);var i=e.name.charAt(0).toUpperCase()+e.name.substring(1),s=i+": "+t+"%";o.beginPath(),o.strokeStyle=a(t),o.lineCap="square",o.closePath(),o.fill(),o.lineWidth=10;for(var c=0;t>=c;c++)n(o,c,s)}function n(e,t,n){setTimeout(function(){r(e,.01*t,n)},20*t)}function r(e,t,n){const r=2*Math.PI,a=Math.PI/2;var o=e.canvas.width/2,i=e.canvas.height/2,s=o/2.5,c="italic "+s/4+"px 'Helvetica Neue'";e.beginPath(),e.arc(o,i,s,-a,r*t-a,!1),e.font=c;var l=e.measureText(n).width,u=e.measureText("w").width;e.fillText(n,o-l/2,i+u/2),e.stroke()}function a(e){return 25>=e?o.danger:50>=e?o.warning:90>=e?o.info:o.success}e.controller("GoalCtrl",["$scope","$log","$timeout","Storage",function(e,n,r,a){e.localStorage=window.localStorage,e.db=a.getConnection(),a.setupDatabase(),e.lifts={},e.init=function(){e.loadData("bench"),e.loadData("squat"),e.loadData("deadlift")},e.getGoal=function(t){return Number(e.localStorage.getItem(t))},e.setGoal=function(t,n){var r=t.target,a=r[0].value;n.goal=a,e.redraw(n),e.localStorage.setItem(n.name,a),n.updating=!1},e.redraw=function(e){var n=document.getElementById(e.canvas),r=n.getContext("2d");r.clearRect(0,0,n.width,n.height),t(e)},e.loadData=function(r){var a=e.db;a.transaction(function(a){var o="SELECT max FROM "+r+" ORDER BY max DESC LIMIT 1",i=e.lifts;a.executeSql(o,[],function(n,a){var o=e.getGoal(r);i[r]={canvas:r+"-canvas",name:r},i[r].goal=o;var s=a.rows.length;s?i[r].current=a.rows.item(0).max:i[r].current=0,e.$apply(),t(i[r])},function(e,t){n.error(t)})})},window.appStart?e.init():r(function(){e.init(),window.appStart=!0},2100)}]);var o={danger:"#d9534f",warning:"#f0ad4e",info:"#5bc0de",success:"#5cb85c"}}(window.angularApp);var StorageService=function(){"use strict";var e=angular.module("StorageService",[]);e.service("Storage",["$log",function(e){var t={};return t.db=null,t.setupDatabase=function(e){this.db=this.getConnection(),e&&this.dropTables(),this.db.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS bench (id INTEGER PRIMARY KEY, recorded long, reps, weight, max)"),e.executeSql("CREATE TABLE IF NOT EXISTS squat (id INTEGER PRIMARY KEY, recorded long, reps, weight, max)"),e.executeSql("CREATE TABLE IF NOT EXISTS deadlift (id INTEGER PRIMARY KEY, recorded long, reps, weight, max)")})},t.checkDatabase=function(){return!!this.db},t.addExercise=function(t,n){return this.db?void this.db.transaction(function(r){e.info("Adding entry into "+t),e.debug(n.date.getTime()),r.executeSql("INSERT INTO "+t+"(recorded, reps, weight, max) VALUES (?,?,?,?)",[n.date.getTime(),n.reps,n.weight,n.max])}):void console.error("The database has not been opened.")},t.dropTables=function(){this.db.transaction(function(e){e.executeSql("DROP TABLE bench"),e.executeSql("DROP TABLE squat"),e.executeSql("DROP TABLE deadlift")})},t.getConnection=function(){return this.db||(this.db=openDatabase("strengthTracker","1.0","StrengthTracker DB",2097152)),this.db},t}])}();!function(e){"use strict";e.directive("mAppLoading",["$animate","$timeout",function(e,t){function n(e,n,r){t(function(){n.addClass("fadeOut"),t(function(){n.remove(),e=n=r=null},1e3)},2e3)}return{link:n,restrict:"C"}}])}(window.angularApp);